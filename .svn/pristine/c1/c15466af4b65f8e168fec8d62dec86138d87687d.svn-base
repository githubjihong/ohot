package com.ohot.shop.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import com.ohot.mapper.SeqGeneratorMapper;
import com.ohot.shop.mapper.PaymentMapper;
import com.ohot.shop.service.PaymentService;
import com.ohot.shop.vo.OrdersVO;
import com.ohot.vo.SeqGeneratorVO;

import jakarta.servlet.http.HttpSession;
import lombok.extern.slf4j.Slf4j;

@Slf4j
@Service
public class PaymentServiceImpl implements PaymentService{
	
	@Autowired
	PaymentMapper paymentMapper;
	
	@Autowired
	SeqGeneratorMapper seqGeneratorMapper;
	
	@Override
	@Transactional
	public int ordersInsert(OrdersVO ordersVO, SeqGeneratorVO seqGeneratorVO) {
		
		log.info("ordersVO" + ordersVO);
		
		//OrdersVO Insert
		int ordersInsert = paymentMapper.ordersInsert(ordersVO);
		
		//OrdersVODetail Insert
		int ordersDetailInsert = paymentMapper.ordersDetailInsert(ordersVO);
		
		//순번 증가
		seqGeneratorMapper.incrementSeqGenerator(seqGeneratorVO);
		
		return ordersInsert;
	}

}
