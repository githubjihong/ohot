package com.ohot.admin.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

import com.ohot.service.StatsService;
import com.ohot.vo.StatsVO;

import lombok.extern.slf4j.Slf4j;

@Slf4j
@Controller
@RequestMapping("/admin")
public class StatsController {
	
	@Autowired StatsService statsservice;
	 

	@GetMapping("/stats/list")
	public String list(Model model ,StatsVO statsVO ) {
		
		List<StatsVO> statsList = this.statsservice.statsList(statsVO);
		List<StatsVO> SubscriptionTotal = this.statsservice.SubscriptionTotal(statsVO);
		log.info("statsList4========================================== : " + SubscriptionTotal);
		
		
		
		model.addAttribute("statsList",statsList);
		model.addAttribute("SubscriptionTotal",SubscriptionTotal);
		log.info("SubscriptionTotal========================================== : " + SubscriptionTotal);
		
		return "stats/list";
	}

	@ResponseBody
	@PostMapping("/stats/listAjax")
	public List<StatsVO> listAjax(StatsVO statsVO) {
		
	
		List<StatsVO> statsList = this.statsservice.statsList(statsVO);
		
		log.info("listAjax->statsList : " + statsList);
		
		return statsList;
	}
//	다음꺼양

	@ResponseBody
	@PostMapping("/stats/listBarAjax")
	public List<StatsVO> listBarAjax(StatsVO statsVO) {
		
	
		List<StatsVO> listBarAjax = this.statsservice.listBarAjax(statsVO);
		
		log.info("statsList2 : " + listBarAjax);
		
		return listBarAjax;
	}
	
	@ResponseBody
	@PostMapping("/stats/listdoughnutAjax")
	public List<StatsVO> listdoughnutAjax(StatsVO statsVO) {
		
		
		List<StatsVO> listdoughnutAjax = this.statsservice.listdoughnutAjax(statsVO);
		
		log.info("statsList3========================================== : " + listdoughnutAjax);
		
		return listdoughnutAjax;
	}
	
	
}
