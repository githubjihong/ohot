<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<!DOCTYPE html>
<html lang="ko">
<head>
    <%@include file="../header.jsp" %>
  <title>${artistGroupInfo.artGroupNm} 공지사항</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #fff;
      font-family: 'Helvetica Neue', sans-serif;
    }

    .container {
      max-width: 820px;
      margin: 50px auto;
    }

    .notice-title {
      font-size: 1.8rem;
      font-weight: bold;
      margin-bottom: 25px;
    }

    .notice-list {
      max-height: 550px;
      overflow-y: auto;
      border-top: 1px solid #dee2e6;
      border-bottom: 1px solid #dee2e6;
    }

    .notice-item {
      padding: 16px 0;
      border-bottom: 1px solid #eee;
    }

    .notice-item:last-child {
      border-bottom: none;
    }

    .notice-item .title {
      font-weight: 500;
    }

    .notice-item .title .new {
      color: red;
      font-size: 0.75rem;
      font-weight: bold;
      margin-right: 6px;
      text-transform: uppercase;
    }

    .notice-item .date {
      font-size: 0.85rem;
      color: #aaa;
    }

    .pagination {
      justify-content: center;
      margin-top: 20px;
    }

    /* 스크롤바 스타일 */
    .notice-list::-webkit-scrollbar {
      width: 6px;
    }

    .notice-list::-webkit-scrollbar-thumb {
      background-color: #ccc;
      border-radius: 4px;
    }

    .notice-list::-webkit-scrollbar-track {
      background-color: #f9f9f9;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="notice-title">${artistGroupInfo.artGroupNm} 커뮤니티 공지사항</div>

    <div class="notice-list">
    
    <c:forEach var="item" items="${newNoticeList }">
      <div class="notice-item">
        <div class="title"><span class="new">new</span>${item.bbsTitle }</div>
        <div class="date">${item.bbsRegDt2 }</div>
      </div>
     </c:forEach>
      <c:forEach var="item" items="${noticeList.content}">
      <div class="notice-item">
        <div class="title">${item.bbsTitle }</div>
        <div class="date">${item.bbsRegDt2 }</div>
      </div>
      </c:forEach>

    </div>
	
    <!-- 페이지네이션 -->
    <nav>
      <ul class="pagination" id="pagination">

      </ul>
    </nav>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <script type="text/javascript">
  $(function(){
	  pagenation();
  })
  
  function pagenation(){
	  let totalPages = ${noticeList.totalPages != null ? noticeList.totalPages : 0};
	  let blockSize = ${noticeList.blockSize != null ? noticeList.blockSize : 10};
	  let startPage = ${noticeList.startPage != null ? noticeList.startPage : 1};
	  let endPage = ${noticeList.endPage != null ? noticeList.endPage : 1};
	  let currentPage = ${noticeList.currentPage != null ? noticeList.currentPage : 1};
	  let artGroupNo = ${artGroupInfo.artGroupNo}
	  
	  console.log("dfdf",blockSize);
	  let str = "";
	  
	  str +=`<li class="page-item \${currentPage === 1 ? 'disabled' : ''}"><a class="page-link" href="/oho/community/notice?artGroupNo=\${artGroupNo}&currentPage=\${currentPage-1}">&lt</a></li>`;
	  
	  for(let i=startPage; i<=endPage; i++){
		  let active = (i === currentPage) ? "active" : "";
		  str+=`<li class="page-item \${active}"><a class="page-link" href="/oho/community/notice?artGroupNo=\${artGroupNo}&currentPage=\${i}">\${i}</a></li>`;
	  }
	  str+=`<li class="page-item \${currentPage === totalPages ? 'disabled' : ''}"><a class="page-link" href="/oho/community/notice?artGroupNo=\${artGroupNo}&currentPage=\${currentPage+1}">&gt</a></li>`;
	  $("#pagination").html(str);
  }
  
  </script>
  <%@include file="../footer.jsp" %> 
</body>
</html>
