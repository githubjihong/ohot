package com.ohot.shop.service.impl;

import org.springframework.scheduling.annotation.Scheduled;
import org.springframework.stereotype.Service;

import com.ohot.shop.mapper.TicketMapper;

import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;

@Slf4j
@Service
@RequiredArgsConstructor
public class TicketSchedulerServiceImpl {

	private final TicketMapper ticketMapper;


//	@Scheduled(fixedDelay = 60000) //서버시작후 1분마다 실행 시연용
	@Scheduled(fixedDelay = 6000000) //작업을 위해 1시간마다 실행
	public void resetUnpaidSeats() {
		log.debug("좌석reset 실행");
		int count = ticketMapper.resetUnpaidSeats();
		log.debug("초기화된 좌석 수: " + count);
	}

}
